{"version":3,"sources":["components/sounds/simonSound1.mp3","components/sounds/simonSound2.mp3","components/sounds/simonSound3.mp3","components/sounds/simonSound4.mp3","components/Button.jsx","components/Board.jsx","App.js","index.js"],"names":["module","exports","__webpack_require__","p","typeMap","1","color","position","2","3","4","Button","_ref","_cn","type","onClick","clicked","style","cn","Object","defineProperty","concat","react_default","a","createElement","className","event","USER","SIMON","FAILURE","timer","timerSimon","timerChangePlayerTurn","initialState","topScore","player","userClicks","simonClicks","reducer","state","action","objectSpread2","payload","console","log","JSON","stringify","Error","Board","_useReducer","useReducer","_useReducer2","slicedToArray","dispatch","_useState","useState","_useState2","setClicked","_useState3","_useState4","mute","simonSays","next","Math","floor","random","userSays","index","numberOfMoves","length","reset","setTimeout","useEffect","document","getElementById","play","i","intervalId","setInterval","clearInterval","Fragment","map","id","components_Button","key","src","sound1","sound2","sound3","sound4","App","components_Board","ReactDOM","render","src_App"],"mappings":"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","file":"static/js/main.5e00de89.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/simonSound1.319c7710.mp3\";","module.exports = __webpack_public_path__ + \"static/media/simonSound2.c3c86e71.mp3\";","module.exports = __webpack_public_path__ + \"static/media/simonSound3.f3c18b98.mp3\";","module.exports = __webpack_public_path__ + \"static/media/simonSound4.f4a912ee.mp3\";","import React from 'react';\nimport cn from 'classnames';\nimport './Button.css';\n\n// sounds from: https://www.freecodecamp.org/forum/t/external-mp3-audio-files/18450/2\n\nconst typeMap = {\n  1: {\n    color: 'red',\n    position: 'top-left',\n  },\n  2: {\n    color: 'yellow',\n    position: 'top-right',\n  },\n  3: {\n    color: 'green',\n    position: 'bottom-left',\n  },\n  4: {\n    color: 'blue',\n    position: 'bottom-right',\n  },\n};\n\nfunction Button({ type, onClick, clicked }) {\n  const style = cn('button', {\n    [`${typeMap[type].position}`]: true,\n    [`${typeMap[type].color}`]: !clicked,\n    [`${typeMap[type].color}-clicked`]: clicked,\n  });\n\n  return <div className={style} onClick={event => onClick()} />;\n}\n\nexport default Button;\n","import React, { useState, useEffect, useReducer } from 'react';\n// import cn from 'classnames';\n\nimport Button from './Button';\nimport sound1 from './sounds/simonSound1.mp3';\nimport sound2 from './sounds/simonSound2.mp3';\nimport sound3 from './sounds/simonSound3.mp3';\nimport sound4 from './sounds/simonSound4.mp3';\n\nconst USER = 'user';\nconst SIMON = 'simon';\nconst FAILURE = 'failure';\n\n// The sounds are not the same length - so we need to support the longest sound (4/blue)\nconst timer = 200;\nconst timerSimon = 450;\nconst timerChangePlayerTurn = 600;\n\nconst initialState = { topScore: 0, player: SIMON, userClicks: 0, simonClicks: [] };\n\nfunction reducer(state, action) {\n  switch (action.type) {\n    case 'setTopScore':\n      return { ...state, topScore: action.payload };\n    case 'setUserClicks':\n      return { ...state, userClicks: action.payload };\n    case 'setSimonClicks':\n      return { ...state, simonClicks: action.payload };\n    case 'reset':\n      return { ...state, player: FAILURE, userClicks: 0, simonClicks: [] }; //TODO initialState (init) funciton with TopScore/FAILURE as param?\n    case 'setPlayer':\n      return { ...state, player: action.payload };\n    default:\n      console.log('Undefined action:', JSON.stringify(action));\n      throw new Error('Undefined action');\n  }\n}\n\nfunction Board() {\n  const [state, dispatch] = useReducer(reducer, initialState);\n  const [clicked, setClicked] = useState(0);\n  const [mute, setMute] = useState(true);\n\n  // Using a named function, to add some context and better explain which effect this is.\n  useEffect(deselectButton);\n\n  function deselectButton() {\n    playSound(clicked);\n    setTimeout(() => setClicked(0), timer);\n  }\n\n  useEffect(() => {\n    if (state.simonClicks.length > 0) {\n      let i = 0;\n      const intervalId = setInterval(() => {\n        setClicked(state.simonClicks[i]);\n        i++;\n        if (i >= state.simonClicks.length) {\n          clearInterval(intervalId);\n          setTimeout(() => {\n            dispatch({ type: 'setPlayer', payload: USER }); // TODO: merge the two?\n            dispatch({ type: 'setUserClicks', payload: 0 });\n          }, timerChangePlayerTurn);\n        }\n      }, timerSimon);\n    }\n  }, [state.simonClicks]);\n\n  function simonSays() {\n    dispatch({ type: 'setPlayer', payload: SIMON });\n    const next = Math.floor(Math.random() * 4 + 1);\n    dispatch({ type: 'setSimonClicks', payload: state.simonClicks.concat(next) });\n  }\n\n  function userSays(index) {\n    setClicked(index);\n\n    if (index !== state.simonClicks[state.userClicks]) {\n      reset();\n    } else {\n      dispatch({ type: 'setUserClicks', payload: state.userClicks + 1 });\n\n      if (state.userClicks + 1 === state.simonClicks.length) {\n        setTimeout(() => {\n          simonSays();\n        }, timerChangePlayerTurn);\n      }\n    }\n  }\n\n  function playSound(type) {\n    // const playPromise = document.getElementById(`simon${type}`).play();\n    // playPromise.then().catch();\n\n    // OR sound = new Audio(mp3).play()\n    if (!mute) {\n      document.getElementById(`simon${type}`).play();\n    }\n  }\n\n  function toggleMute() {\n    return setMute(!mute);\n  }\n\n  function reset() {\n    const numberOfMoves = state.simonClicks.length - 1;\n    if (numberOfMoves > state.topScore) {\n      dispatch({ type: 'setTopScore', payload: numberOfMoves });\n    }\n    dispatch({ type: 'reset' }); // TODO: should the reset calculate the topScore?\n  }\n\n  return (\n    <>\n      <div className=\"Board\">\n        {[1, 2, 3, 4].map(id => (\n          <Button\n            key={id + clicked + state.player}\n            type={id}\n            onClick={() => userSays(id)}\n            clicked={clicked === id}\n          />\n        ))}\n      </div>\n      <div className=\"score\">\n        Score {state.simonClicks.length ? state.simonClicks.length - 1 : 0}\n      </div>\n      <div>High Score: {state.topScore}</div>\n      <div className=\"controls\">\n        <div className=\"start\" onClick={simonSays} />\n        <div className=\"turn\">\n          Turn: <div className={`${state.player}-icon`} />\n        </div>\n        <div className=\"sound\">\n          {/* <div className={cn({mute: mute, speaker: !mute,})} onClick={() => toggleMute()} /> */}\n          <audio id=\"simon1\">\n            <source src={sound1} type=\"audio/mpeg\" />\n          </audio>\n          <audio id=\"simon2\">\n            <source src={sound2} type=\"audio/mpeg\" />\n          </audio>\n          <audio id=\"simon3\">\n            <source src={sound3} type=\"audio/mpeg\" />\n          </audio>\n          <audio id=\"simon4\">\n            <source src={sound4} type=\"audio/mpeg\" />\n          </audio>\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default Board;\n","import React from 'react';\nimport Board from './components/Board';\nimport './App.css';\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <Board />\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n// import * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n// serviceWorker.unregister();\n"],"sourceRoot":""}